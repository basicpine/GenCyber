# Pentest Lab 01

### Port Scanning:

What is port scaning:
Port scanning is a method of determining which ports on a network are open and could be receiving or sending data. It is also a process for sending packets to specific ports on a host and analyzing responses to identify vulnerabilities.

#### Installing nmap:
run the following command in a terminal on your pi:

` sudo apt install nmap `

#### Using nmap:
run the following command in a terminal on your pi:

` nmap -Av TeamIP `
 * Note the  ` -A ` option runs script scanning, and other agressive scans. This is noisey .
___
## Abusing vulrnable services:

**FTP Anonymous Login:**

What is ftp?

FTP (File Transfer Protocol) is a network protocol for transmitting files between computers over Transmission Control Protocol/Internet Protocol (TCP/IP) connections. Within the TCP/IP suite, FTP is considered an application layer protocol.

Example of what your nmap scans should have returned:

![581d8dab7aaf6edf8a80548f1836e661.png](https://gitlab.com/main130/gencyber/-/raw/main/PenTestIntro/581d8dab7aaf6edf8a80548f1836e661.png)

**Building a anonymous ftp connector:**

Why build this script?

In the real world you might have more than 1 ftp server youâ€™d like to grab files from. You
can save time and script it out to grab all files from all servers while you watch your favorite YouTuber doing the latest tick tock trend.

Using your IDE open a file to start coding. I named my file ` pentool.py ` but you can name yours whatever you'd like.

Example Code:

![c6f35118fb65943a8cf5b8934179da6e.png](https://gitlab.com/main130/gencyber/-/raw/main/PenTestIntro/c6f35118fb65943a8cf5b8934179da6e.png)

Note: **You need to add your team IP into the HOSTNAME variable.**

If all went well you should see whatever file printed on your screen now in your directory.
run ` ls ` in your terminal and compare it to the name printed in your terminal:

![d9369180dd50e74c8036b0468e6bf660.png](https://gitlab.com/main130/gencyber/-/raw/main/PenTestIntro/d9369180dd50e74c8036b0468e6bf660.png)

What about if there are multiple files on the server? Can we rewrite the code to grab all the files?

Hint: What is the filenames variable and what is the [0] part of the code doing?
## Password Spraying
___
From the ftp server you should have gotten a few files. One of them should be called ` passwords.txt ` and a ` NoteToAllAdmins.eml `. 

eml files are emails so lets cat the file and see what it says:
` cat NoteToAllAdmins.eml `

![39152ae65e0d6d33df708f8f89d9a338.png](https://gitlab.com/main130/gencyber/-/raw/main/PenTestIntro/39152ae65e0d6d33df708f8f89d9a338.png)

Awesome! Looks like a email stating the changing of a username from system to sys. Lets use this information and the file called ` passwords.txt ` and see if we can access ssh with it.

**SSH Access**

what is ssh?

SSH or Secure Shell is a network communication protocol that enables two computers to communicate (c.f http or hypertext transfer protocol, which is the protocol used to transfer hypertext such as web pages) and share data. An inherent feature of ssh is that the communication between the two computers is encrypted meaning that it is suitable for use on insecure networks.

SSH is often used to "login" and perform operations on remote computers but it may also be used for transferring data.

why write a script?

We could try every password in the list with the user sys, but that will take a while. If we script it out we can just let the computer do the work for us. Lets write a script that will run through the list of passwords and tell us if the password is valid or not.

First before writing the code lets think about what we need to do. 

First we need to store our targets ip address, the username, and filename into variables.

Next we are going to need to open the passwords file and read all the lines from it.

Finally we are going to loop through all the passwords and try them with the user variable we defined in the first step.

Here is what the code should look like:

![955d09f8029a2ad8d8ff8fea3a304aac.png](https://gitlab.com/main130/gencyber/-/raw/main/PenTestIntro/955d09f8029a2ad8d8ff8fea3a304aac.png)

Please note I used a user called user for my example not sys. You need to use the user sys.

What the output should look like:

![15f2f2a13a4a36ff486d19fd9fd38b53.png](https://gitlab.com/main130/gencyber/-/raw/main/PenTestIntro/15f2f2a13a4a36ff486d19fd9fd38b53.png)


Sweet! Now that we have a user name and password lets try to ssh to the machine.

Open another terminal and type:
` ssh sys@YOURIP `
Type yes to aouthorize the key

![41da83fe69b019306e75a3196424b56d.png](https://gitlab.com/main130/gencyber/-/raw/main/PenTestIntro/41da83fe69b019306e75a3196424b56d.png)

Type in your password and ou now have a shell on the machine!

![6972e279e87a121a1c0fc8c88a2286aa.png](https://gitlab.com/main130/gencyber/-/raw/main/PenTestIntro/6972e279e87a121a1c0fc8c88a2286aa.png)

### Bouns Prive Esc

See if you can get root.
